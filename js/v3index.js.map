{"version":3,"sources":["../../src/js/ui/Boot.js","../../src/js/common/intro.js","../../src/js/ui/UI.js","../../src/js/ui/Event.js"],"names":["getEL","id","_doc","getElementById","customAttr","el","name","value","dataset","lowername","i","length","ch","charAt","toLowerCase","getAttribute","location","search","self","doclang","substr","href","match","testdoc","v3index","extend","onload_func","window","pzprfaq","input_init","parentNode","removeChild","style","display","Array","prototype","slice","call","querySelectorAll","forEach","typename","RegExp","$1","addEventListener","e","click_tab","setRecentPuzzle","disp_tab","setTranslation","translate","cnt","urlif","init","fileif","dbif","className","querySelector","set_puzzle_filter","isdisp","tablename","filtername","pid","pzpr","variety","toPID","tab","count","addPuzzle","createElement","innerHTML","listparent","appendChild","pinfo","captions","push","anode","firstChild","str_jp","ja","str_en","en","JSON","parse","localStorage","recent","counts","sort","a","b","item","setlang","lang","setting","language","stringify","valid","childNodes","state","this","obj","text","replace","body","n","_form","document","urlinput","url","open","fileform","filebox","fileinput","fileEL","FileReader","reader","onload","fileonload","target","result","readAsText","files","FileList","File","getAsText","action","domain","submit","reset","str","farray","split","fstr","list","DBlist","pheader","database","sorts_ja","sorts_en","datalist","select","open_ja","open_en","importlist","callback","data","row","pzl","parser","pdata","col","cols","rows","order","time","opt","setAttribute","getcaption","metadata","comtext","comment","author","source","width","datestr","ni","num","date","Date","setTime","getFullYear","getMonth","getDate","getHours","getMinutes","hard","selected","getvalue","val","pstate","lunch","testa","trial","lunch2","lunch3","nigun","omopa","orig","genre","tabstate","genres"],"mappings":"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","file":"v3index.js","sourcesContent":["// Boot.js v3.4.0\r\n/* global ActiveXObject:readonly */\r\n\r\n(function(){\r\n/********************************/\r\n/* 初期化時のみ使用するルーチン */\r\n/********************************/\r\n\r\nvar require_accesslog = true;\r\nvar onload_pzl = null;\r\nvar onload_option = {};\r\n\r\n//---------------------------------------------------------------------------\r\n// ★boot() window.onload直後の処理\r\n//---------------------------------------------------------------------------\r\npzpr.on('load', function boot(){\r\n\tif(importData() && includeDebugFile()){ startPuzzle();}\r\n\telse{ setTimeout(boot,0);}\r\n});\r\n\r\nfunction importData(){\r\n\tif(!onload_pzl){\r\n\t\t/* 1) 盤面複製・index.htmlからのファイル入力/Database入力か */\r\n\t\t/* 2) URL(?以降)をチェック */\r\n\t\tonload_pzl = (importFileData() || importURL());\r\n\t\t\r\n\t\t/* 指定されたパズルがない場合はさようなら～ */\r\n\t\tif(!onload_pzl || !onload_pzl.pid){ failOpen();}\r\n\t}\r\n\t\r\n\treturn true;\r\n}\r\n\r\nfunction failOpen(){\r\n\tif(!!ui.puzzle && !!ui.puzzle.pid){ return;}\r\n\tvar title2 = document.getElementById('title2');\r\n\tif(!!title2){ title2.innerHTML = \"Fail to import puzzle data or URL.\";}\r\n\tdocument.getElementById('menupanel').innerHTML = '';\r\n\t//throw new Error(\"No Include Puzzle Data Exception\");\r\n}\r\n\r\nfunction includeDebugFile(){\r\n\tvar pid = onload_pzl.pid, result = true;\r\n\t\r\n\t/* 必要な場合、テスト用ファイルのinclude         */\r\n\t/* importURL()後でないと必要かどうか判定できない */\r\n\tif(ui.debugmode){\r\n\t\tif(!ui.debug){\r\n\t\t\tresult = false;\r\n\t\t}\r\n\t\telse if(!ui.debug.urls){\r\n\t\t\tui.debug.includeDebugScript(\"for_test.js\");\r\n\t\t\tresult = false;\r\n\t\t}\r\n\t\telse if(!ui.debug.urls[pid]){\r\n\t\t\tui.debug.includeDebugScript(\"test_\"+pid+\".js\");\r\n\t\t\tresult = false;\r\n\t\t}\r\n\t}\r\n\t\r\n\treturn result;\r\n}\r\n\r\nfunction startPuzzle(){\r\n\tvar pzl = onload_pzl, pid = pzl.pid;\r\n\tif(ui.debugmode){ onload_option.mode = 'play';}\r\n\t\r\n\t/* IE SVGのtextLengthがうまく指定できていないので回避策を追加 */\r\n\tif((function(ua){ return ua.match(/MSIE/) || (ua.match(/AppleWebKit/) && ua.match(/Edge/));})(navigator.userAgent)){\r\n\t\tonload_option.graphic = 'canvas';\r\n\t}\r\n\t\r\n\t/* パズルオブジェクトの作成 */\r\n\tvar element = document.getElementById('divques');\r\n\tvar puzzle = ui.puzzle = new pzpr.Puzzle(element, onload_option);\r\n\tpzpr.connectKeyEvents(puzzle);\r\n\t\r\n\t/* パズルオブジェクト作成〜open()間に呼ぶ */\r\n\tui.event.onload_func();\r\n\t\r\n\t// 単体初期化処理のルーチンへ\r\n\tvar callback = null;\r\n\tif(!ui.debugmode){ callback = accesslog;}\r\n\telse{ puzzle.once('ready', function(puzzle){ ui.menuconfig.set('autocheck', true);});}\r\n\tif(!ui.debugmode && require_accesslog && onload_option.type!=='player'){ puzzle.once('ready', countpid);}\r\n\tpuzzle.once('fail-open', failOpen);\r\n\tpuzzle.open((!ui.debugmode || !!pzl.qdata) ? pzl : pid+\"/\"+ui.debug.urls[pid], callback);\r\n\t\r\n\treturn true;\r\n}\r\n\r\n//---------------------------------------------------------------------------\r\n// ★importURL() 初期化時にURLを解析し、パズルの種類・エディタ/player判定を行う\r\n//---------------------------------------------------------------------------\r\nfunction importURL(){\r\n\t/* index.htmlからURLが入力されたかチェック */\r\n\tvar search = getStorageData('pzprv3_urldata', 'urldata');\r\n\tif(!!search){ require_accesslog = false;}  /* index.htmlからのURL読み込み時はアクセスログをとらない */\r\n\t\r\n\t/* index.htmlからURLが入力されていない場合は現在のURLの?以降をとってくる */\r\n\tsearch = search || location.search;\r\n\tif(!search){ return null;}\r\n\t\r\n\t/* 一旦先頭の?記号を取り除く */\r\n\tif(search.charAt(0)===\"?\"){ search = search.substr(1);}\r\n\t\r\n\twhile(search.match(/^(\\w+)\\=(\\w+)\\&(.*)/)){\r\n\t\tonload_option[RegExp.$1] = RegExp.$2;\r\n\t\tsearch = RegExp.$3;\r\n\t}\r\n\t\r\n\t// エディタモードかplayerモードか、等を判定する\r\n\tif(search===\"test\"){ search = 'country_test';}\r\n\t\r\n\tvar startmode = '';\r\n\tif     (search.match(/_test/)){ startmode = 'EDITOR'; ui.debugmode = true;}\r\n\telse if(search.match(/^m\\+/)) { startmode = 'EDITOR';}\r\n\telse if(search.match(/_edit/)){ startmode = 'EDITOR';}\r\n\telse if(search.match(/_play/)){ startmode = 'PLAYER';}\r\n\tif(!require_accesslog){ startmode = 'EDITOR';}  /* index.htmlからの読み込み時はEDITORにする */\r\n\r\n\tsearch=search.replace(/^m\\+/,'');\r\n\tsearch=search.replace(/(_test|_edit|_play)/,'');\r\n\r\n\tvar pzl = pzpr.parser.parseURL(search);\r\n\r\n\tstartmode = startmode || (!pzl.body ? 'EDITOR' : 'PLAYER');\r\n\tif(startmode==='PLAYER'){ onload_option.type = 'player';}\r\n\r\n\treturn pzl;\r\n}\r\n\r\n//---------------------------------------------------------------------------\r\n// ★importFileData() 初期化時にファイルデータの読み込みを行う\r\n//---------------------------------------------------------------------------\r\nfunction importFileData(){\r\n\t/* index.htmlや盤面の複製等でファイルorブラウザ保存データが入力されたかチェック */\r\n\tvar fstr = getStorageData('pzprv3_filedata', 'filedata');\r\n\tif(!fstr){ return null;}\r\n\r\n\tvar pzl = pzpr.parser.parseFile(fstr, '');\r\n\tif(!pzl){ return null;}\r\n\r\n\trequire_accesslog = false;\r\n\t\r\n\treturn pzl;\r\n}\r\n\r\n//---------------------------------------------------------------------------\r\n// ★getStorageData() localStorageやsesseionStorageのデータを読み込む\r\n//---------------------------------------------------------------------------\r\nfunction getStorageData(key, key2){\r\n\t// 移し変える処理\r\n\tvar str = localStorage[key];\r\n\tif(typeof str===\"string\"){\r\n\t\tdelete localStorage[key];\r\n\t\tsessionStorage[key2] = str;\r\n\t}\r\n\r\n\tstr = sessionStorage[key2];\r\n\treturn (typeof str===\"string\" ? str : null);\r\n}\r\n\r\n//---------------------------------------------------------------------------\r\n// ★countpid() エディタとして開いた回数をログする\r\n//---------------------------------------------------------------------------\r\nfunction countpid(puzzle){\r\n\tvar counts = JSON.parse(localStorage['pzprv3_index:ranking']||'{}');\r\n\t\r\n\t// パズルの開いた数を記録\r\n\tvar count = counts.count || {};\r\n\tvar cnt = count[puzzle.pid] || 0;\r\n\tcount[puzzle.pid] = cnt + 1;\r\n\t\r\n\t// 最新10パズルを記録\r\n\tvar recent = counts.recent || [];\r\n\tif(recent.indexOf(puzzle.pid)>=0){ recent.splice(recent.indexOf(puzzle.pid),1);}\r\n\trecent.unshift(puzzle.pid);\r\n\tif(recent.length>10){ recent.pop();}\r\n\t\r\n\tlocalStorage['pzprv3_index:ranking'] = JSON.stringify({count:count,recent:recent});\r\n}\r\n\r\n//---------------------------------------------------------------------------\r\n// ★accesslog() playerのアクセスログをとる\r\n//---------------------------------------------------------------------------\r\nfunction accesslog(puzzle){\r\n\tif(!puzzle.playeronly || !onload_pzl.pid || !require_accesslog){ return;}\r\n\r\n\tif(document.domain!=='indi.s58.xrea.com' &&\r\n\t   document.domain!=='pzprv3.sakura.ne.jp' &&\r\n\t   !document.domain.match(/(dev\\.)?pzv\\.jp/)){ return;}\r\n\r\n\tvar refer = document.referrer;\r\n\tif(refer.match(/http\\:\\/\\/[\\w\\.]*pzv\\.jp/)){ return;}\r\n\r\n\trefer = refer.replace(/\\?/g,\"%3f\").replace(/\\&/g,\"%26\")\r\n\t\t\t\t .replace(/\\=/g,\"%3d\").replace(/\\//g,\"%2f\");\r\n\r\n\t// 送信\r\n\tvar xmlhttp = false;\r\n\tif(typeof ActiveXObject !== \"undefined\"){\r\n\t\ttry { xmlhttp = new ActiveXObject(\"Microsoft.XMLHTTP\");}\r\n\t\tcatch (e) { xmlhttp = false;}\r\n\t}\r\n\tif(!xmlhttp && typeof XMLHttpRequest !== \"undefined\") {\r\n\t\txmlhttp = new XMLHttpRequest();\r\n\t}\r\n\tif(xmlhttp){\r\n\t\tvar data = [\r\n\t\t\t(\"scr=\"     + \"pzprv3\"),\r\n\t\t\t(\"pid=\"     + onload_pzl.pid),\r\n\t\t\t(\"referer=\" + refer),\r\n\t\t\t(\"pzldata=\" + onload_pzl.qdata)\r\n\t\t].join('&');\r\n\r\n\t\txmlhttp.open(\"POST\", \"./record.cgi\");\r\n\t\txmlhttp.onreadystatechange = function(){};\r\n\t\txmlhttp.setRequestHeader(\"Content-Type\" , \"application/x-www-form-urlencoded\");\r\n\t\txmlhttp.send(data);\r\n\t}\r\n}\r\n\r\n})();\r\n","// intro.js\r\n\r\n(function(){\r\n","// UI.js v3.4.0\r\n/* exported ui, _doc, getEL, createEL */\r\n\r\n/* ui.js Locals */\r\nvar _doc = document;\r\nfunction getEL(id){ return _doc.getElementById(id);}\r\nfunction createEL(tagName){ return _doc.createElement(tagName);}\r\n\r\n//---------------------------------------------------------------------------\r\n// ★uiオブジェクト UserInterface側のオブジェクト\r\n//---------------------------------------------------------------------------\r\n/* extern */\r\nwindow.ui = {\r\n\tversion : '3.6.10.1',\r\n\r\n\t/* このサイトで使用するパズルのオブジェクト */\r\n\tpuzzle    : null,\r\n\t\r\n\t/* どの種類のパズルのメニューを表示しているか */\r\n\tcurrentpid : '',\r\n\t\r\n\t/* メンバオブジェクト */\r\n\tevent     : null,\r\n\tmenuconfig: null,\r\n\tmenuarea  : null,\r\n\ttoolarea  : null,\r\n\tpopupmgr  : null,\r\n\tkeypopup  : null,\r\n\ttimer     : null,\r\n\t\r\n\tdebugmode : false,\r\n\t\r\n\tenableGetText   : false,\t// FileReader APIの旧仕様でファイルが読めるか\r\n\tenableReadText  : false,\t// HTML5 FileReader APIでファイルが読めるか\r\n\treader : null,\t\t\t\t// FileReaderオブジェクト\r\n\t\r\n\tenableSaveImage : false,\t// 画像保存が可能か\r\n\tenableImageType : {},\t\t// 保存可能な画像形式\r\n\t\r\n\tenableSaveBlob  : false,\t// saveBlobが使用できるか\r\n\tfileio : 'fileio.cgi',\t\t// fileio.cgiのファイル名\r\n\r\n\t//---------------------------------------------------------------------------\r\n\t// ui.displayAll()     全てのメニュー、ボタン、ラベルに対して文字列を設定する\r\n\t// ui.setdisplay()     個別のメニュー、ボタン、ラベルに対して文字列を設定する\r\n\t//---------------------------------------------------------------------------\r\n\tdisplayAll : function(){\r\n\t\tui.menuarea.display();\r\n\t\tui.toolarea.display();\r\n\t\tui.popupmgr.translate();\r\n\t\tui.misc.displayDesign();\r\n\t},\r\n\tsetdisplay : function(idname){\r\n\t\tui.menuarea.setdisplay(idname);\r\n\t\tui.toolarea.setdisplay(idname);\r\n\t},\r\n\r\n\t//---------------------------------------------------------------------------\r\n\t// ui.customAttr()   エレメントのカスタムattributeの値を返す\r\n\t//---------------------------------------------------------------------------\r\n\tcustomAttr : function(el, name){\r\n\t\tvar value = \"\";\r\n\t\tif(el.dataset!==void 0){ value = el.dataset[name];}\r\n\t\t/* IE10, Firefox5, Chrome7, Safari5.1以下のフォールバック */\r\n\t\telse{\r\n\t\t\tvar lowername = \"data-\";\r\n\t\t\tfor(var i=0;i<name.length;i++){\r\n\t\t\t\tvar ch = name[i] || name.charAt(i);\r\n\t\t\t\tlowername += ((ch>=\"A\" && ch<=\"Z\") ? (\"-\" + ch.toLowerCase()) : ch);\r\n\t\t\t}\r\n\t\t\tvalue = el[lowername] || el.getAttribute(lowername) || \"\";\r\n\t\t}\r\n\t\treturn value;\r\n\t},\r\n\r\n\t//----------------------------------------------------------------------\r\n\t// ui.windowWidth()   ウィンドウの幅を返す\r\n\t//----------------------------------------------------------------------\r\n\twindowWidth : function(){\r\n\t\treturn ((window.innerHeight!==void 0) ? window.innerWidth : _doc.body.clientWidth);\r\n\t},\r\n\r\n\t//---------------------------------------------------------------------------\r\n\t// ui.adjustcellsize()  resizeイベント時に、pc.cw, pc.chのサイズを(自動)調節する\r\n\t// ui.getBoardPadding() Canvasと境界線の周りの間にあるpaddingのサイズを求めます\r\n\t//---------------------------------------------------------------------------\r\n\tadjustcellsize : function(){\r\n\t\tvar puzzle = ui.puzzle, pc = puzzle.painter;\r\n\t\tvar cols = pc.getCanvasCols() + ui.getBoardPadding()*2;\r\n\t\tvar wwidth = ui.windowWidth()-6, mwidth;\t//  margin/borderがあるので、適当に引いておく\r\n\t\tvar uiconf = ui.menuconfig;\r\n\r\n\t\tvar cellsize, cellsizeval = uiconf.get('cellsizeval');\r\n\t\tvar cr = {base:1.0,limit:0.40}, ws = {base:0.80,limit:0.96}, ci=[];\r\n\t\tci[0] = (wwidth*ws.base )/(cellsizeval*cr.base );\r\n\t\tci[1] = (wwidth*ws.limit)/(cellsizeval*cr.base );\r\n\t\tci[2] = (wwidth*ws.limit)/(cellsizeval*cr.limit);\r\n\r\n\t\t// 横幅いっぱいに広げたい場合\r\n\t\tif(uiconf.get('fullwidth')){\r\n\t\t\tmwidth = wwidth*0.98;\r\n\t\t\tcellsize = (mwidth*0.92)/cols;\r\n\t\t}\r\n\t\t// 縮小が必要ない場合\r\n\t\telse if(!uiconf.get('adjsize') || cols < ci[0]){\r\n\t\t\tmwidth = wwidth*ws.base-4;\r\n\t\t\tcellsize = cellsizeval*cr.base;\r\n\t\t}\r\n\t\t// ひとまずセルのサイズを変えずにmainの幅を調節する場合\r\n\t\telse if(cols < ci[1]){\r\n\t\t\tcellsize = cellsizeval*cr.base;\r\n\t\t\tmwidth = cellsize*cols;\r\n\t\t}\r\n\t\t// base～limit間でサイズを自動調節する場合\r\n\t\telse if(cols < ci[2]){\r\n\t\t\tmwidth = wwidth*ws.limit-4;\r\n\t\t\tcellsize = mwidth/cols; // 外枠ぎりぎりにする\r\n\t\t}\r\n\t\t// 自動調整の下限値を超える場合\r\n\t\telse{\r\n\t\t\tcellsize = cellsizeval*cr.limit;\r\n\t\t\tmwidth = cellsize*cols;\r\n\t\t}\r\n\r\n\t\t// mainのサイズ変更\r\n\t\tif(!pc.outputImage){\r\n\t\t\tgetEL('main').style.width = ''+(mwidth|0)+'px';\r\n\t\t}\r\n\r\n\t\tpuzzle.setCanvasSizeByCellSize(cellsize);\r\n\t},\r\n\tgetBoardPadding : function(){\r\n\t\tvar puzzle = ui.puzzle, padding = 0;\r\n\t\tswitch(puzzle.pid){\r\n\t\t\tcase 'firefly': case 'hashikake': case 'wblink':\r\n\t\t\tcase 'ichimaga': case 'ichimagam': case 'ichimagax':\r\n\t\t\t\tpadding = 0.30; break;\r\n\t\t\t\r\n\t\t\tcase 'kouchoku': case 'gokigen': case 'wagiri': case 'creek':\r\n\t\t\t\tpadding = 0.20; break;\r\n\t\t\t\r\n\t\t\tcase 'slither': case 'bag': case 'mejilink':\r\n\t\t\t\tpadding = 0.15; break;\r\n\t\t\t\r\n\t\t\tcase 'kinkonkan': case 'building': case 'easyasabc': case 'box':\r\n\t\t\t\tpadding = 0.05; break;\r\n\t\t\t\r\n\t\t\tcase 'bosanowa':\r\n\t\t\t\tpadding = (ui.menuconfig.get('disptype_bosanowa')!==2?0.50:0.05); break;\r\n\t\t\t\r\n\t\t\tdefault: padding = 0.50; break;\r\n\t\t}\r\n\t\tif(ui.menuconfig.get('fullwidth')){ padding = 0;}\r\n\t\treturn padding;\r\n\t},\r\n\r\n\t//--------------------------------------------------------------------------------\r\n\t// ui.selectStr()  現在の言語に応じた文字列を返す\r\n\t//--------------------------------------------------------------------------------\r\n\tselectStr : function(strJP, strEN){\r\n\t\tif(!strEN){ return strJP;}\r\n\t\treturn (pzpr.lang==='ja' ? strJP : strEN);\r\n\t},\r\n\r\n\t//---------------------------------------------------------------------------\r\n\t// ui.getCurrentConfigList() 現在のパズルで有効な設定と設定値を返す\r\n\t//---------------------------------------------------------------------------\r\n\tgetCurrentConfigList : function(){\r\n\t\treturn ui.menuconfig.getList();\r\n\t},\r\n\r\n\t//----------------------------------------------------------------------\r\n\t// ui.initFileReadMethod() ファイルアクセス関連の処理の初期化を行う\r\n\t//----------------------------------------------------------------------\r\n\tinitFileReadMethod : function(){\r\n\t\t// File Reader (あれば)の初期化処理\r\n\t\tif(typeof FileReader !== 'undefined'){\r\n\t\t\tthis.reader = new FileReader();\r\n\t\t\tthis.reader.onload = function(e){ ui.puzzle.open(e.target.result);};\r\n\t\t\tthis.enableReadText = true;\r\n\t\t}\r\n\t\telse{\r\n\t\t\tthis.reader = null;\r\n\t\t\tthis.enableGetText = (typeof FileList !== 'undefined' && typeof File.prototype.getAsText !== 'undefined');\r\n\t\t}\r\n\t},\r\n\r\n\t//----------------------------------------------------------------------\r\n\t// ui.initImageSaveMethod() 画像保存関連の処理の初期化を行う\r\n\t//----------------------------------------------------------------------\r\n\tinitImageSaveMethod : function(puzzle){\r\n\t\tif(!!pzpr.Candle.enable.canvas && !!_doc.createElement('canvas').toDataURL){\r\n\t\t\tthis.enableImageType.png = true;\r\n\t\t\t\r\n\t\t\tvar canvas = _doc.createElement('canvas');\r\n\t\t\tcanvas.width = canvas.height = 1;\r\n\t\t\tif(canvas.toDataURL('image/gif').match('image/gif'))  { this.enableImageType.gif = true;}\r\n\t\t\tif(canvas.toDataURL('image/jpeg').match('image/jpeg')){ this.enableImageType.jpeg = true;}\r\n\t\t\tif(canvas.toDataURL('image/webp').match('image/webp')){ this.enableImageType.webp = true;}\r\n\t\t}\r\n\t\tif(!!pzpr.Candle.enable.svg && !!window.btoa){\r\n\t\t\tthis.enableImageType.svg = true;\r\n\t\t}\r\n\t\tif(!!this.enableImageType.png || !!this.enableImageType.svg){\r\n\t\t\tthis.enableSaveImage = true;\r\n\t\t}\r\n\t\t\r\n\t\tthis.enableSaveBlob = (!!window.navigator.saveBlob);\r\n\t\tthis.fileio = (_doc.domain==='indi.s58.xrea.com'?\"fileio.xcg\":\"fileio.cgi\");\r\n\t}\r\n};\r\n","// Event.js v3.4.0\r\n/* global _doc:readonly */\r\n\r\n//---------------------------------------------------------------------------\r\n// ★UIEventsクラス イベント設定の管理を行う\r\n//---------------------------------------------------------------------------\r\n// メニュー描画/取得/html表示系\r\nui.event =\r\n{\r\n\tresizetimer : null,\t// resizeタイマー\r\n\r\n\tremovers : [],\r\n\r\n\t//----------------------------------------------------------------------\r\n\t// event.addEvent()        addEventListener(など)を呼び出す\r\n\t//----------------------------------------------------------------------\r\n\taddEvent : function(el, event, self, callback, capt){\r\n\t\tthis.removers.push( pzpr.util.addEvent(el, event, self, callback, !!capt) );\r\n\t},\r\n\r\n\t//----------------------------------------------------------------------\r\n\t// event.removeAllEvents() addEventで登録されたイベントを削除する\r\n\t//----------------------------------------------------------------------\r\n\tremoveAllEvents : function(){\r\n\t\tthis.removers.forEach(function(remover){ remover();});\r\n\t\tthis.removers=[];\r\n\t},\r\n\r\n\t//---------------------------------------------------------------------------\r\n\t// event.setWindowEvents()  マウス入力、キー入力以外のイベントの設定を行う\r\n\t//---------------------------------------------------------------------------\r\n\tsetWindowEvents : function(){\r\n\t\t// File API＋Drag&Drop APIの設定\r\n\t\tif(!!ui.reader){\r\n\t\t\tvar DDhandler = function(e){\r\n\t\t\t\tui.reader.readAsText(e.dataTransfer.files[0]);\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t};\r\n\t\t\tthis.addEvent(window, 'dragover', this, function(e){ e.preventDefault();}, true);\r\n\t\t\tthis.addEvent(window, 'drop', this, DDhandler, true);\r\n\t\t}\r\n\r\n\t\t// onBlurにイベントを割り当てる\r\n\t\tthis.addEvent(_doc, 'blur', this, this.onblur_func);\r\n\r\n\t\t// onresizeイベントを割り当てる\r\n\t\tthis.addEvent(window, 'resize', this, this.onresize_func);\r\n\t\tthis.addEvent(window, 'orientationchange', this, this.onresize_func);\r\n\r\n\t\t// onbeforeunloadイベントを割り当てる\r\n\t\tthis.addEvent(window, 'beforeunload', this, this.onbeforeunload_func);\r\n\r\n\t\t// onunloadイベントを割り当てる\r\n\t\tthis.addEvent(window, 'unload', this, this.onunload_func);\r\n\t\tthis.addEvent(window, 'pagehide', this, this.onunload_func);\r\n\r\n\t\t// エラー表示を消去する\r\n\t\tthis.addEvent(document.getElementById('quesboard'), 'mousedown', this, function(e){\r\n\t\t\tui.puzzle.errclear();\r\n\t\t\te.stopPropagation();\r\n\t\t});\r\n\t},\r\n\r\n\t//---------------------------------------------------------------------------\r\n\t// event.onload_func()   ウィンドウを開いた時に呼ばれる関数\r\n\t// event.onunload_func() ウィンドウをクローズする前に呼ばれる関数\r\n\t//---------------------------------------------------------------------------\r\n\tonload_func : function(){\r\n\t\tui.initFileReadMethod();\r\n\t\t\r\n\t\tui.menuconfig.restore();\r\n\t\t\r\n\t\tui.listener.setListeners(ui.puzzle);\r\n\t\t\r\n\t\tif(pzpr.env.OS.Android){\r\n\t\t\tui.misc.modifyCSS({'body, .btn':{fontFamily:'Verdana, Arial, sans-serif'}});\r\n\t\t}\r\n\t},\r\n\tonunload_func : function(){\r\n\t\tui.menuconfig.save();\r\n\t},\r\n\r\n\t//---------------------------------------------------------------------------\r\n\t// event.onresize_func() ウィンドウリサイズ時に呼ばれる関数\r\n\t// event.onblur_func()   ウィンドウからフォーカスが離れた時に呼ばれる関数\r\n\t// event.onbeforeunload_func()  ウィンドウをクローズする前に呼ばれる関数\r\n\t//---------------------------------------------------------------------------\r\n\tonresize_func : function(){\r\n\t\tif(this.resizetimer){ clearTimeout(this.resizetimer);}\r\n\t\tthis.resizetimer = setTimeout(function(){ ui.adjustcellsize();},250);\r\n\t},\r\n\tonblur_func : function(){\r\n\t\tui.puzzle.key.keyreset();\r\n\t\tui.puzzle.mouse.mousereset();\r\n\t},\r\n\tonbeforeunload_func : function(e){\r\n\t\tif(ui.puzzle.playeronly || !ui.puzzle.ismodified()){ return;}\r\n\t\t\r\n\t\tvar msg = ui.selectStr(\"盤面が更新されています\", \"The board is edited.\");\r\n\t\te.returnValue = msg;\r\n\t\treturn msg;\r\n\t}\r\n};\r\n"]}
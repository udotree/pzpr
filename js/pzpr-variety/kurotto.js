/*! @license pzpr.js v0.11.1 (c) 2009-2019 sabo2, MIT license
 *   https://github.com/sabo2/pzprv3 */

!function(a,b){"object"==typeof module&&module.exports?module.exports=[a,b]:pzpr.classmgr.makeCustom(a,b)}(["kurotto","nurimisaki"],{MouseEvent:{use:!0,inputModes:{edit:["number","clear"],play:["shade","unshade"]},mouseinput_auto:function(){this.puzzle.playmode?this.mousestart||this.mousemove?this.inputcell():this.mouseend&&this.notInputted()&&this.inputqcmp():this.puzzle.editmode&&this.mousestart&&this.inputqnum()},inputqcmp:function(){var a=this.getcell();console.log(a),a.isnull||a.noNum()||(a.setQcmp(+!a.qcmp),a.draw(),this.mousereset())}},KeyEvent:{enablemake:!0},Cell:{numberRemainsUnshaded:!0},"Cell@kurotto":{maxnum:function(){var a=this.board.cell.length-1;return a<=999?a:999},minnum:0,checkComplete:function(){if(!this.isValidNum())return!0;for(var a=0,b=[],c=this.getdir4clist(),d=0;d<c.length;d++){var e=c[d][0].sblk;if(null!==e){for(var f=0;f<b.length;f++)if(b[f]===e){e=null;break}null!==e&&(a+=e.clist.length,b.push(e))}}return this.qnum===a}},"Cell@nurimisaki":{maxnum:function(){var a=this.board,b=this.bx,c=this.by,d=1+((b<a.maxbx>>1?a.maxbx-b:b)>>1),e=1+((c<a.maxby>>1?a.maxby-c:c)>>1);return Math.max(d,e)},minnum:2,checkComplete:function(){if(!this.isValidNum())return!0;for(var a=0,b=this.getdir4clist(),c=null,d=0;d<b.length;d++)b[d][0].isUnshade()&&(c=b[d][0],++a);if(1!==a)return!1;for(var e=this.getdir(c,2),f=c.getaddr(),g=2;;){f.movedir(e,2);var h=f.getc();if(h.isnull||h.isShade())break;++g}return this.getNum()===g}},"AreaShadeGraph@kurotto":{enabled:!0},"AreaUnshadeGraph@nurimisaki":{enabled:!0},"Graphic@kurotto":{autocmp:"number"},Graphic:{hideHatena:!0,qanscolor:"black",numbercolor_func:"qnum",circleratio:[.45,.4],setRange:function(a,b,c,d){var e=this.puzzle,f=e.board;e.execConfig("autocmp")&&(a=f.minbx-2,b=f.minby-2,c=f.maxbx+2,d=f.maxby+2),this.common.setRange.call(this,a,b,c,d)},paint:function(){this.drawBGCells(),this.drawShadedCells(),this.drawDotCells(!1),"kurotto"===this.pid?this.drawGrid():"nurimisaki"===this.pid&&this.drawDashedGrid(),this.drawCircledNumbers(),this.drawChassis(),this.drawTarget()},getCircleFillColor:function(a){return"kurotto"===this.pid&&this.puzzle.execConfig("autocmp")&&a.isValidNum()?a.checkComplete()?this.qcmpcolor:this.circlebasecolor:"nurimisaki"===this.pid&&a.isNum()?0!==a.qcmp?this.qcmpcolor:this.circlebasecolor:null}},Encode:{decodePzpr:function(a){this.decodeNumber16()},encodePzpr:function(a){this.encodeNumber16()}},FileIO:{decodeData:function(){this.decodeCellQnum(),this.decodeCellQanssubcmp_kurotto()},encodeData:function(){this.encodeCellQnum(),this.encodeCellQanssubcmp_kurotto()},decodeCellQanssubcmp_kurotto:function(){this.decodeCell(function(a,b){"+"===b?a.qsub=1:"-"===b?a.qcmp=1:"#"===b&&(a.qans=1)})},encodeCellQanssubcmp_kurotto:function(){this.encodeCell(function(a){return 1===a.qans?"# ":1===a.qsub?"+ ":1===a.qcmp?"- ":". "})}},AnsCheck:{checklist:["checkShadeCellExist","checkConnectUnshade@nurimisaki","check2x2ShadeCell+@nurimisaki","checkNonCapePruralUnshaded@nurimisaki","checkCapeSingleUnshaded@nurimisaki","checkCellNumber_kurotto","check2x2UnshadeCell++@nurimisaki"],checkCellNumber_kurotto:function(){for(var a=this.board,b=0;b<a.cell.length;b++){var c=a.cell[b];if(!c.checkComplete()){if(this.failcode.add("nmSumSizeNe"),this.checkOnly)break;c.seterr(1)}}},checkCapeSingleUnshaded:function(){for(var a=this.board,b=0;b<a.cell.length;b++){var c=a.cell[b];if(!c.noNum()){if(1!==c.countDir4Cell(function(a){return a.isUnshade()})){if(this.failcode.add("nmUnshadeNe1"),this.checkOnly)break;c.seterr(1)}}}},checkNonCapePruralUnshaded:function(){for(var a=this.board,b=0;b<a.cell.length;b++){var c=a.cell[b];if(!c.isNum()&&!c.isShade()){if(1===c.countDir4Cell(function(a){return a.isUnshade()})){if(this.failcode.add("nmUnshadeEq1"),this.checkOnly)break;c.seterr(1)}}}}},"FailCode@kurotto":{nmSumSizeNe:["隣り合う黒マスの個数の合計が数字と違います。","The number is not equal to sum of adjacent masses of shaded cells."]},"FailCode@nurimisaki":{nmSumSizeNe:["連続する白マスの長さが数字と違います。","The number is not equal to the length of unshaded cells from the circle."],nmUnshadeNe1:["〇の上下左右2マス以上が白マスになっています。","There are two or more unshaded cells around a circle."],nmUnshadeEq1:["〇でないセルが岬になっています。","There is an cape without circle."]}});
/*! @license pzpr.js v0.11.1 (c) 2009-2019 sabo2, MIT license
 *   https://github.com/sabo2/pzprv3 */

!function(a,b){"object"==typeof module&&module.exports?module.exports=[a,b]:pzpr.classmgr.makeCustom(a,b)}(["nondango"],{MouseEvent:{use:!0,inputModes:{edit:["border","circle-unshade"],play:["shade","unshade"]},mouseinput:function(){"shade"===this.inputMode||"unshade"===this.inputMode?this.inputcell_nondango():"circle-unshade"===this.inputMode?this.inputcircle():this.common.mouseinput.call(this)},mouseinput_auto:function(){this.puzzle.playmode?(this.mousestart||this.mousemove)&&this.inputcell_nondango():this.puzzle.editmode&&(this.mousestart||this.mousemove?this.inputborder():this.mouseend&&this.notInputted()&&this.inputcircle())},inputcell_nondango:function(){var a=this.getcell();a.isnull||a===this.mouseCell||(0===a.ques||"shade"===this.inputMode?(this.inputcell(),1===this.inputData&&this.mousereset()):(this.mousestart||null!==this.inputData)&&(this.mousestart&&(this.inputData=0===a.qsub?2:0),a.setQans(0),a.setQsub(2===this.inputData?1:0),a.draw()))},inputcircle:function(){var a=this.getcell();a.isnull||a===this.mouseCell||(a.setQues(8===a.ques?0:8),a.setQans(0),a.setQsub(0),a.draw(),this.mouseCell=a)}},Cell:{ques:8,posthook:{qans:function(a){this.room.checkAutoCmp()}}},CellList:{checkCmp:function(){return 1===this.filter(function(a){return 1===a.qans}).length}},Board:{hasborder:1},AreaRoomGraph:{enabled:!0},Graphic:{gridcolor_type:"LIGHT",autocmp:"room",bcolor:"rgb(208, 208, 255)",bgcellcolor_func:"qcmp1",paint:function(){this.drawBGCells(),this.drawGrid(),this.drawCircles(),this.drawBorders(),this.drawChassis()},getCircleStrokeColor:function(a){return 0===a.ques?1===a.error?this.errcolor1:a.trial?this.trialcolor:this.shadecolor:null},getCircleFillColor:function(a){return 0===a.ques?1===a.qans?1===a.error?this.errcolor1:a.trial?this.trialcolor:this.shadecolor:1===a.error?this.errbcolor1:"white":null}},Encode:{decodePzpr:function(a){this.decodeBorder(),this.decodeBoard_nondango()},encodePzpr:function(a){this.encodeBorder(),this.encodeBoard_nondango()},decodeBoard_nondango:function(){var a=this.outbstr,b=0,c=0,d=this.board,e=[16,8,4,2,1];a:for(c=0;c<a.length;c++)for(var f=parseInt(a.charAt(c),32),g=0;g<5;g++){if(!d.cell[b])break a;d.cell[b].ques=f&e[g]?8:0,b++}this.outbstr=a.substr(c+1)},encodeBoard_nondango:function(a){for(var b="",c=0,d=0,e=this.board,f=[16,8,4,2,1],g=0;g<e.cell.length;g++)8===e.cell[g].ques&&(d+=f[c]),5===++c&&(b+=d.toString(32),c=0,d=0);c>0&&(b+=d.toString(32)),this.outbstr+=b}},FileIO:{decodeData:function(){this.decodeAreaRoom(),this.decodeCellQnumanssub()},encodeData:function(){this.encodeAreaRoom(),this.encodeCellQnumanssub()},decodeCellQnumanssub:function(){this.decodeCell(function(a,b){"#"===b?(a.ques=0,a.qans=1):"%"===b?(a.ques=0,a.qsub=1):"o"===b?a.ques=0:"+"===b&&(a.ques=8,a.qsub=1)})},encodeCellQnumanssub:function(){this.encodeCell(function(a){return 0===a.ques?1===a.qans?"# ":1===a.qsub?"% ":"o ":1===a.qsub?"+ ":". "})}},AnsCheck:{checklist:["checkOverShadeCircle","checkThreeShadedCircles","checkThreeUnshadedCircles","checkNoShadeCircle+"],checkOverShadeCircle:function(){this.checkAllBlock(this.board.roommgr,function(a){return 1===a.qans},function(a,b,c,d){return c<=1},"bkMSGe2")},checkNoShadeCircle:function(){this.checkAllBlock(this.board.roommgr,function(a){return 1===a.qans},function(a,b,c,d){return c>=1},"bkNoMS")},checkThreeShadedCircles:function(){this.checkThreeCircles(function(a){return 1===a.qans},"msConsecGt3")},checkThreeUnshadedCircles:function(){this.checkThreeCircles(function(a){return 0===a.ques&&0===a.qans},"muConsecGt3")},checkThreeCircles:function(a,b){for(var c=this.board,d=this.klass.CellList,e=0;e<c.cell.length;e++){var f,g=c.cell[e],h=g.bx,i=g.by,j=[new d(g)];g.bx<c.maxbx-4&&(f=new d,f.add(g,c.getc(h+2,i),c.getc(h+4,i)),j.push(f)),g.by<c.maxby-4&&(f=new d,f.add(g,c.getc(h,i+2),c.getc(h,i+4)),j.push(f),g.bx>c.minbx+4&&(f=new d,f.add(g,c.getc(h-2,i+2),c.getc(h-4,i+4)),j.push(f)),g.bx<c.maxbx-4&&(f=new d,f.add(g,c.getc(h+2,i+2),c.getc(h+4,i+4)),j.push(f)));for(var k=0;k<j.length;k++)if(f=j[k],3===f.filter(a).length){if(this.failcode.add(b),this.checkOnly)break;f.seterr(1)}}}},FailCode:{bkMSGe2:["1つの領域に複数のくろまるがあります。","An area has two or more shaded circles."],bkNoMS:["くろまるのない領域があります。","An area has no circle."],msConsecGt3:["くろまるが3つ以上連続しています。","There are three or more shaded circles in a row."],muConsecGt3:["しろまるが3つ以上連続しています。","There are three or more unshaded circles in a row."]}});
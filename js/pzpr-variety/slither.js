/*! @license pzpr.js v0.11.1 (c) 2009-2019 sabo2, MIT license
 *   https://github.com/sabo2/pzprv3 */

!function(a,b){"object"==typeof module&&module.exports?module.exports=[a,b]:pzpr.classmgr.makeCustom(a,b)}(["slither","bag"],{MouseEvent:{inputModes:{edit:["number","clear","info-line"],play:["line","peke","bgcolor","bgcolor1","bgcolor2","clear","info-line"]},mouseinput_auto:function(){var a=this.puzzle;a.playmode?this.checkInputBGcolor()?this.inputBGcolor():"left"===this.btn?this.mousestart||this.mousemove?this.inputLine():"slither"===this.pid&&this.mouseend&&this.notInputted()&&(this.prevPos.reset(),this.inputpeke()):"right"===this.btn&&("slither"===this.pid&&(this.mousestart||this.mousemove)?this.inputpeke():"bag"===this.pid&&this.inputBGcolor(!0)):a.editmode&&this.mousestart&&this.inputqnum()},checkInputBGcolor:function(){var a="bag"===this.pid||this.puzzle.execConfig("bgcolor");return a&&(a=this.mousestart?this.getpos(.25).oncell():!!this.mousemove&&this.inputData>=10),a}},KeyEvent:{enablemake:!0},"Cell@slither":{maxnum:3,minnum:0,getdir4BorderLine1:function(){var a=this.adjborder,b=0;return a.top.isLine()&&b++,a.bottom.isLine()&&b++,a.left.isLine()&&b++,a.right.isLine()&&b++,b}},"Cell@bag":{maxnum:function(){return Math.min(999,this.board.cols+this.board.rows-1)},minnum:2,inside:!1},Board:{hasborder:2,borderAsLine:!0},"Board@bag":{searchInsideArea:function(){this.cell[0].inside=0!==this.cross[0].lcnt;for(var a=1;a<this.maxby;a+=2){a>1&&(this.getc(1,a).inside=!!(this.getc(1,a-2).inside^this.getb(1,a-1).isLine()));for(var b=3;b<this.maxbx;b+=2)this.getc(b,a).inside=!!(this.getc(b-2,a).inside^this.getb(b-1,a).isLine())}}},LineGraph:{enabled:!0},"Graphic@slither":{irowake:!0},"Graphic@bag":{gridcolor_type:"DLIGHT"},Graphic:{bgcellcolor_func:"qsub2",numbercolor_func:"qnum",margin:.5,paint:function(){this.drawBGCells(),"bag"===this.pid&&this.drawDashedGrid(!1),this.drawLines(),"slither"===this.pid&&this.drawBaseMarks(),this.drawQuesNumbers(),"slither"===this.pid&&this.drawPekes(),this.drawTarget()},repaintParts:function(a){"slither"===this.pid&&(this.range.crosses=a.crossinside(),this.drawBaseMarks())}},"Encode@slither":{decodePzpr:function(a){this.decode4Cell()},encodePzpr:function(a){this.encode4Cell()},decodeKanpen:function(){this.fio.decodeCellQnum_kanpen()},encodeKanpen:function(){this.fio.encodeCellQnum_kanpen()}},"Encode@bag":{decodePzpr:function(a){this.decodeNumber16()},encodePzpr:function(a){this.encodeNumber16()}},FileIO:{decodeData:function(){1===this.filever||"slither"!==this.pid?(this.decodeCellQnum(),this.decodeCellQsub(),this.decodeBorderLine()):0===this.filever&&(this.decodeCellQnum(),this.decodeBorderLine())},encodeData:function(){"slither"===this.pid&&(this.filever=1),this.encodeCellQnum(),this.encodeCellQsub(),this.encodeBorderLine()}},"FileIO@slither":{kanpenOpen:function(){this.decodeCellQnum_kanpen(),this.decodeBorderLine()},kanpenSave:function(){this.encodeCellQnum_kanpen(),this.encodeBorderLine()},kanpenOpenXML:function(){this.PBOX_ADJUST=0,this.decodeCellQnum_XMLBoard_Brow(),this.PBOX_ADJUST=1,this.decodeBorderLine_slither_XMLAnswer()},kanpenSaveXML:function(){this.PBOX_ADJUST=0,this.encodeCellQnum_XMLBoard_Brow(),this.PBOX_ADJUST=1,this.encodeBorderLine_slither_XMLAnswer()},UNDECIDED_NUM_XML:5,PBOX_ADJUST:1,decodeBorderLine_slither_XMLAnswer:function(){this.decodeCellXMLArow(function(a,b){var c=0,d=a.relbd(0,1),e=a.relbd(1,0);"n"===b.charAt(0)?c=+b.substr(1):(b.match(/h/)&&(c+=1),b.match(/v/)&&(c+=2)),1&c&&(d.line=1),2&c&&(e.line=1),4&c&&(d.qsub=2),8&c&&(e.qsub=2)})},encodeBorderLine_slither_XMLAnswer:function(){this.encodeCellXMLArow(function(a){var b=0,c=a.relbd(0,1),d=a.relbd(1,0);return 1===c.line&&(b+=1),1===d.line&&(b+=2),2===c.qsub&&(b+=4),2===d.qsub&&(b+=8),0===b?"s":1===b?"h":2===b?"v":3===b?"hv":"n"+b})}},AnsCheck:{checklist:["checkLineExist+","checkBranchLine","checkCrossLine","checkdir4BorderLine@slither","checkOneLoop","checkDeadendLine+","checkOutsideNumber@bag","checkViewOfNumber@bag"]},"AnsCheck@slither":{checkdir4BorderLine:function(){this.checkAllCell(function(a){return a.qnum>=0&&a.getdir4BorderLine1()!==a.qnum},"nmLineNe")}},"AnsCheck@bag":{checkOutsideNumber:function(){this.board.searchInsideArea(),this.checkAllCell(function(a){return!a.inside&&a.isNum()},"nmOutside")},checkViewOfNumber:function(a){for(var b=this.board,c=0;c<b.cell.length;c++){var d=b.cell[c];if(d.isValidNum()){var e,f=new this.klass.CellList,g=d.adjacent;for(f.add(d),e=g.left;!e.isnull&&e.inside;)f.add(e),e=e.adjacent.left;for(e=g.right;!e.isnull&&e.inside;)f.add(e),e=e.adjacent.right;for(e=g.top;!e.isnull&&e.inside;)f.add(e),e=e.adjacent.top;for(e=g.bottom;!e.isnull&&e.inside;)f.add(e),e=e.adjacent.bottom;if(d.qnum!==f.length){if(this.failcode.add("nmSumViewNe"),this.checkOnly)break;f.seterr(1)}}}}},"FailCode@slither":{nmLineNe:["数字の周りにある線の本数が違います。","The number is not equal to the number of lines around it."]},"FailCode@bag":{nmOutside:["輪の内側に入っていない数字があります。","There is an outside number."],nmSumViewNe:["数字と輪の内側になる4方向のマスの合計が違います。","The number and the sum of the inside cells of four direction is different."]}});
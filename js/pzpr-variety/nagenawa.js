/*! @license pzpr.js v0.11.1 (c) 2009-2019 sabo2, MIT license
 *   https://github.com/sabo2/pzprv3 */

!function(a,b){"object"==typeof module&&module.exports?module.exports=[a,b]:pzpr.classmgr.makeCustom(a,b)}(["nagenawa","ringring"],{"MouseEvent@nagenawa":{inputModes:{edit:["border","number","clear","info-line"],play:["line","subcircle","subcross","clear","info-line"]}},"MouseEvent@ringring":{inputModes:{edit:["info-line"],play:["line","peke","info-line"]}},MouseEvent:{mouseinput_auto:function(){if(this.puzzle.playmode){if(this.mousestart||this.mousemove)"left"===this.btn?this.inputLine():"right"===this.btn&&this.inputpeke();else if(this.mouseend&&this.notInputted()){if(this.inputpeke_onend())return;this.inputMB()}}else this.puzzle.editmode&&("nagenawa"===this.pid?this.mousestart||this.mousemove?this.inputborder():this.mouseend&&this.notInputted()&&this.inputqnum():"ringring"===this.pid&&this.mousestart&&this.inputblock())},inputblock:function(){var a=this.getcell();a.isnull||(a.setQues(0===a.ques?1:0),a.draw())}},"KeyEvent@nagenawa":{enablemake:!0},Cell:{maxnum:function(){return Math.min(999,this.room.clist.length)},minnum:0},"Border@ringring":{enableLineNG:!0},Board:{cols:8,rows:8,hasborder:1},LineGraph:{enabled:!0,isLineCross:!0},"AreaRoomGraph@nagenawa":{enabled:!0,hastop:!0},Graphic:{irowake:!0,gridcolor_type:"SLIGHT",numbercolor_func:"fixed",fontsizeratio:.45,textoption:{position:5},paint:function(){var a=this.pid;this.drawBGCells(),this.drawDashedGrid(),"nagenawa"===a?(this.drawQuesNumbers(),this.drawMBs(),this.drawBorders()):"ringring"===a&&this.drawQuesCells(),this.drawLines(),this.drawPekes(),this.drawChassis(),this.drawTarget()}},"Graphic@ringring":{drawTarget:function(){}},"Encode@nagenawa":{decodePzpr:function(a){this.decodeBorder(),this.decodeRoomNumber16()},encodePzpr:function(a){this.encodeBorder(),this.encodeRoomNumber16()}},"Encode@ringring":{decodePzpr:function(a){this.decodeBlockCell()},encodePzpr:function(a){this.encodeBlockCell()},decodeBlockCell:function(){var a=0,b=0,c=this.outbstr,d=this.board;for(b=0;b<c.length;b++){var e=c.charAt(b);if(this.include(e,"0","9")||this.include(e,"a","z")?(a+=parseInt(e,36),d.cell[a]&&(d.cell[a].ques=1)):"."===e&&(a+=35),a++,!d.cell[a]){b++;break}}this.outbstr=c.substr(b)},encodeBlockCell:function(){for(var a="",b=0,c=this.board,d=0;d<c.cell.length;d++){var e="";1===c.cell[d].ques?e=".":b++,e?(a+=b.toString(36),b=0):36===b&&(a+=".",b=0)}this.outbstr+=a}},"FileIO@nagenawa":{decodeData:function(){this.decodeAreaRoom(),this.decodeCellQnum(),this.decodeBorderLine(),this.decodeCellQsub()},encodeData:function(){this.encodeAreaRoom(),this.encodeCellQnum(),this.encodeBorderLine(),this.encodeCellQsub()}},"FileIO@ringring":{decodeData:function(){this.decodeCellBlock(),this.decodeBorderLine()},encodeData:function(){this.encodeCellBlock(),this.encodeBorderLine()},decodeCellBlock:function(){this.decodeCell(function(a,b){"1"===b&&(a.ques=1)})},encodeCellBlock:function(){this.encodeCell(function(a){return 1===a.ques?"1 ":"0 "})}},AnsCheck:{checklist:["checkLineExist","checkLineOnShadeCell@ringring","checkOverLineCount@nagenawa","checkBranchLine","checkDeadendLine+","checkLessLineCount@nagenawa","checkAllLoopRect","checkUnreachedUnshadeCell+@ringring"],checkOverLineCount:function(){this.checkLinesInArea(this.board.roommgr,function(a,b,c,d){return d<=0||d>=c},"bkLineGt")},checkLessLineCount:function(){this.checkLinesInArea(this.board.roommgr,function(a,b,c,d){return d<=0||d<=c},"bkLineLt")},checkUnreachedUnshadeCell:function(){this.checkAllCell(function(a){return 0===a.ques&&0===a.lcnt},"cuNoLine")},checkAllLoopRect:function(){for(var a=!0,b=this.board,c=b.linegraph.components,d=0;d<c.length;d++){var e=c[d].getedgeobjs();if(!this.isLoopRect(e)){if(a=!1,this.checkOnly)break;c[d].setedgeerr(1)}}a||(this.failcode.add("lnNotRect"),b.border.setnoerr())},isLoopRect:function(a){for(var b=this.board,c=b.maxbx,d=b.minbx,e=b.maxby,f=b.minby,g=0;g<a.length;g++)c>a[g].bx&&(c=a[g].bx),d<a[g].bx&&(d=a[g].bx),e>a[g].by&&(e=a[g].by),f<a[g].by&&(f=a[g].by);for(var g=0;g<a.length;g++){var h=a[g];if(h.bx!==c&&h.bx!==d&&h.by!==e&&h.by!==f)return!1}return!0}},FailCode:{lnNotRect:["長方形か正方形でない輪っかがあります。","There is a non-rectangle loop."],bkLineGt:["数字のある部屋と線が通過するマスの数が違います。","The number of the cells that is passed any line in the room and the number written in the room is diffrerent."],bkLineLt:["数字のある部屋と線が通過するマスの数が違います。","The number of the cells that is passed any line in the room and the number written in the room is diffrerent."],cuNoLine:["白マスの上に線が引かれていません。","There is no line on the unshaded cell."]}});
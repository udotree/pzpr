/*! @license pzpr.js v0.11.1 (c) 2009-2019 sabo2, MIT license
 *   https://github.com/sabo2/pzprv3 */

!function(a,b){"object"==typeof module&&module.exports?module.exports=[a,b]:pzpr.classmgr.makeCustom(a,b)}(["usoone"],{MouseEvent:{RBShadeCell:!0,use:!0,inputModes:{edit:["border","number","clear","info-blk"],play:["shade","unshade","submark","subcircle","subcross","info-blk"]},mouseinput:function(){"subcircle"===this.inputMode?this.inputqcmp(1):"subcross"===this.inputMode?this.inputqcmp(2):this.common.mouseinput.call(this)},mouseinput_other:function(){"submark"===this.inputMode&&this.inputqcmp()},mouseinput_auto:function(){this.puzzle.playmode?this.mousestart?this.inputcell_usoone():this.mousemove?this.inputcell():this.mouseend&&this.notInputted()&&this.inputqcmp():this.puzzle.editmode&&(this.mousestart||this.mousemove?this.inputborder():this.mouseend&&this.notInputted()&&this.inputqnum())},inputcell_usoone:function(){var a=this.getcell();a.isnull||(a.isNum()&&"left"===this.btn?this.inputqcmp():this.inputcell())},inputqcmp:function(a){var b=this.getcell();!b.isnull&&b.isNum()&&(void 0===a?b.setQcmp(("left"===this.btn?[2,0,1]:[1,2,0])[b.qcmp]):b.setQcmp(b.qcmp!==a?a:0),"submark"!==this.inputMode&&2===this.puzzle.getConfig("use")&&0===b.qcmp?this.inputcell():(this.mousereset(),b.draw()))}},KeyEvent:{enablemake:!0},Cell:{numberRemainsUnshaded:!0,maxnum:4,minnum:0,isLiar:function(){return!(this.qnum<0)&&this.qnum!==this.countDir4Cell(function(a){return a.isShade()})},propclear:function(a,b){var c=this.constructor.prototype[a];this[a]===c||this.board.subclearmode&&"qcmp"===a&&2===this.qcmp||(b&&!this.propnorec[a]&&this.addOpe(a,this[a],c),this[a]=c)}},CellList:{subclear:function(a,b){this.board.subclearmode=!0,this.common.subclear.call(this),this.board.subclearmode=!1}},Board:{hasborder:1},AreaUnshadeGraph:{enabled:!0},AreaRoomGraph:{enabled:!0},Graphic:{gridcolor_type:"LIGHT",enablebcolor:!0,bgcellcolor_func:"qsub1",mbcolor:"rgb(0, 224, 0)",paint:function(){this.drawBGCells(),this.drawGrid(),this.drawShadedCells(),this.drawMBs_usoone(),this.drawQuesNumbers(),this.drawBorders(),this.drawChassis(),this.drawBoxBorders(!1),this.drawTarget()},drawMBs_usoone:function(){var a=this.vinc("cell_mb","auto",!0);a.lineWidth=Math.max(this.cw/18,2);for(var b=.35*this.cw,c=this.range.cells,d=0;d<c.length;d++){var e,f,g=c[d];g.qcmp>0&&(e=g.bx*this.bw,f=g.by*this.bh),a.vid="c_MB1_"+g.id,1===g.qcmp?(a.strokeStyle=g.trial?this.trialcolor:this.mbcolor,a.strokeCircle(e,f,b)):a.vhide(),a.vid="c_MB2_"+g.id,2===g.qcmp?(a.strokeStyle=g.trial?this.trialcolor:this.shadecolor,a.strokeCross(e,f,b)):a.vhide()}}},Encode:{decodePzpr:function(a){this.decodeBorder(),this.decode4Cell()},encodePzpr:function(a){this.encodeBorder(),this.encode4Cell()}},FileIO:{decodeData:function(){this.decodeAreaRoom(),this.decodeCellQnum(),this.decodeCellQanssubcmp2()},encodeData:function(){this.encodeAreaRoom(),this.encodeCellQnum(),this.encodeCellQanssubcmp2()},decodeCellQanssubcmp2:function(){this.decodeCell(function(a,b){"1"===b?a.qans=1:"."!==b&&("+"===b.substr(0,1)&&(a.qsub=1),"o"===b.substr(-1,1)&&(a.qcmp=1),"x"===b.substr(-1,1)&&(a.qcmp=2))})},encodeCellQanssubcmp2:function(){this.encodeCell(function(a){if(1===a.qans)return"1 ";var b=1===a.qsub?"+":"";return 1===a.qcmp?b+="o":2===a.qcmp&&(b+="x"),(b||".")+" "})}},AnsCheck:{checklist:["checkAdjacentShadeCell","checkConnectUnshadeRB","checkLiarCell"],checkLiarCell:function(a){this.checkAllBlock(this.board.roommgr,function(a){return a.isLiar()},function(a,b,c,d){return 1===c},"bkLiarNe1")}},FailCode:{bkLiarNe1:["部屋に含まれる嘘つきの数字が1つでありません。","The number of liars in a room is not one."]}});